<html ng-app="ariadne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ariadne &mdash; An Intelligent Task List</title>

    <!-- Third-Party Stylesheets -->
    <link rel="stylesheet" href="/vendor/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">

    <!-- Application Stylesheets -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <main class="container">
        <!-- Title -->
        <div class="page-header">
            <h1>Ariadne <small>An Intelligent Task List</small></h1>
        </div>

        <!-- Tasks -->
        <section ng-controller="TaskController as tasks">
            <!-- Active List -->
            <div class="list-group">
                <div class="page-header">
                    <h4>Active <small>Limit of {{ tasks.taskLimit }}</small></h4>
                </div>
                <li class="list-group-item task" ng-class="{ 'list-group-item-warning': task.flags.isImportant && !task.flags.isUrgent, 'list-group-item-info': task.flags.isUrgent && !task.flags.isImportant, 'list-group-item-danger': task.flags.isUrgent && task.flags.isImportant }" ng-repeat="task in tasks.taskList | filter : { flags: { isActive: true, isComplete: false } } | orderBy: 'name' | orderBy: '-flags.isUrgent' | orderBy: '-flags.isImportant'">
                    <span>{{task.name}}</span>
                    <span ng-if="task.label" class="badge">{{task.label}}</span>
                    <div class="pull-right">
                        <a href="#" ng-click="tasks.toggle(task._id, 'isComplete');" class="text-muted fa fa-fw fa-check"></a>
                        <a href="#" ng-click="tasks.toggle(task._id, 'isActive');" class="text-info fa fa-fw fa-minus" ng-if="!task.flags.isComplete"></a>
                        <a href="#" ng-click="tasks.toggle(task._id, 'isImportant');" class="text-warning fa fa-fw fa-exclamation"></a>
                        <a href="#" ng-click="tasks.toggle(task._id, 'isUrgent');" class="text-success fa fa-fw fa-clock-o"></a>
                        <a href="#" ng-click="tasks.removeTask(task._id)" class="text-danger fa fa-fw fa-trash-o" ng-if="!task.flags.isComplete"></a href="#">
                        &nbsp;&nbsp;&nbsp;
                    </div>
                </li>
            </div>

            <!-- Task List -->
            <div class="list-group">
                <div class="page-header">
                    <h4>Task List</h4>
                </div>
                <li class="list-group-item task" ng-repeat="task in tasks.taskList | filter: { flags: { isActive: false } } | orderBy: 'label'">
                    <span>{{task.name}}</span>
                    <span ng-if="task.flags.isImportant" class="label label-warning">Important</span>
                    <span ng-if="task.flags.isUrgent" class="label label-info">Urgent</span>
                    <span ng-if="task.label" class="badge">{{task.label}}</span>
                    <div class="pull-right">
                        <a href="#" ng-click="tasks.toggle(task._id, 'isActive');" class="text-info fa fa-fw fa-plus" ng-if="!task.flags.isActive"></a>
                        <a href="#" ng-click="tasks.toggle(task._id, 'isImportant');" class="text-warning fa fa-fw fa-exclamation"></a>
                        <a href="#" ng-click="tasks.toggle(task._id, 'isUrgent');" class="text-success fa fa-fw fa-clock-o"></a>
                        <a href="#" ng-click="tasks.removeTask(task._id)" class="text-danger fa fa-fw fa-trash-o"></a href="#">
                        &nbsp;&nbsp;&nbsp;
                    </div>
                </li>

            </div>
            <!-- Add New Task -->
            <div class="page-header">
                <h4>Create Task</h4>
            </div>
            <form ng-submit="tasks.createTask(); console.log(tasks.taskList);">
                <div class="form-group">
                    <input type="text" placeholder="Name" class="form-control" ng-model="tasks.newTask.name">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Label (optional)" list="labelList" ng-model="tasks.newTask.label">
                    <datalist id="labelList">
                        <option ng-repeat="task in tasks.taskList | unique: 'label'" ng-if="task.label">{{ task.label }}</option>
                    </datalist>
                </div>
                <button type="submit" class="btn btn-lg btn-primary">Add</button>
            </form>

            <!-- Completed List -->
            <div class="list-group">
                <div class="page-header">
                    <h4>Completed Tasks</h4>
                </div>
                <li class="list-group-item disabled" ng-repeat="task in tasks.taskList | filter: { flags: { isActive: true, isComplete: true} }">
                    {{ task.name }}
                    <div class="pull-right">
                        <a href="#" class="fa fa-undo fa-fw text-muted" ng-click="tasks.toggle(task._id, 'isComplete');"></a>
                    </div>
                </li>
            </div>
        </section>
    </main>

    <!-- Third-Party Code -->
    <script src="/vendor/angular/angular.js"></script>
    <script src="/vendor/angular-resource/angular-resource.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-filter/0.5.8/angular-filter.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
    <script src="/vendor/jquery/dist/jquery.min.js"></script>
    <script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Application Code -->
    <script src="/js/app.js"></script>
    <script src="/js/controllers/taskController.js"></script>
    <script src="/js/services/taskService.js"></script>
    <script src="/js/services/userService.js"></script>
</body>
</html>