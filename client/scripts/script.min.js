angular.module("ariadne",["ngResource","angular.filter","ui.bootstrap"]),angular.module("ariadne").controller("AdminController",["$scope","Admin","$filter",function(a,b,c){var d=this;d.stats={},d.userList=b.query({tag:"users"},function(){d.stats.totalUsers=d.userList.length}),d.taskList=b.query({tag:"tasks"},function(){d.stats.totalTasks=d.taskList.length,d.stats.archivedTasks=c("filter")(d.taskList,{flags:{isArchived:!0}}).length,d.stats.activeTasks=c("filter")(d.taskList,{flags:{isActive:!0,isArchived:!1,isComplete:!1}}).length,d.stats.completeTasks=c("filter")(d.taskList,{flags:{isArchived:!1,isComplete:!0}}).length,d.stats.currentTasks=d.stats.totalTasks-d.stats.archivedTasks}),d.feedbackList=b.query({tag:"feedback"},function(){console.log("Feedback Queried")}),d.archive=function(){b.save({tag:"archive"},function(){console.log("Archive Run")})},d.toggleUser=function(a){}}]),angular.module("ariadne").controller("FeedbackController",["Feedback","$scope",function(a,b){var c=this;c.createComment=function(){var d=new a;d.message=c.newMessage,d.name=b.main.user.username,d.$save(function(a){c.newMessage=""})}}]),angular.module("ariadne").controller("MainController",["User","Task","$scope","$filter",function(a,b,c,d){var e=this;e.taskList=[],e.user=a.get(function(){b.query({_id:e.user._id},function(a){e.taskList=a})})}]),angular.module("ariadne").controller("TaskController",["$filter","Task","$scope",function(a,b,c){var d=this;d.taskLimit=5,d.activeCount=a("filter")(c.main.taskList,{flags:{isActive:!0}}).length,d.completeCount=a("filter")(c.main.taskList,{flags:{isComplete:!0}}).length,d.newTask={name:"",label:""},c.$watch(function(){return c.main.taskList},function(){d.activeCount=a("filter")(c.main.taskList,{flags:{isActive:!0}}).length,d.completeCount=a("filter")(c.main.taskList,{flags:{isComplete:!0}}).length}),d.createTask=function(){var a=new b;angular.merge(a,d.newTask),a.owner=c.main.user._id,a.$save(function(a){c.main.taskList.push(a),d.newTask={}}),$("#createTask").modal("hide")},d.removeTask=function(d){b.remove({id:d},{justOne:!0},function(b){c.main.taskList=a("filter")(c.main.taskList,function(a){return a._id!==d})})},d.toggle=function(e,f){if("isActive"===f){if(!a("filter")(c.main.taskList,{_id:e})[0].flags.isActive&&a("filter")(c.main.taskList,{flags:{isActive:!0}}).length>=d.taskLimit)return void console.log("Active Task Limit Reached");a("filter")(c.main.taskList,{_id:e})[0].flags.isActive?a("filter")(c.main.taskList,{_id:e})[0].flags.isActive&&d.activeCount--:d.activeCount++}"isComplete"===f&&(a("filter")(c.main.taskList,{_id:e})[0].flags.isComplete?a("filter")(c.main.taskList,{_id:e})[0].flags.isComplete&&d.completeCount--:d.completeCount++);var g=a("filter")(c.main.taskList,{_id:e})[0];g.flags[f]=!g.flags[f],b.save({_id:c.main.user._id,id:e},g)}}]),angular.module("ariadne").controller("UserController",[function(){}]),angular.module("ariadne").factory("Admin",["$resource",function(a){return a("/api/admin/:tag/:id",{tag:"@tag",id:"@id"})}]),angular.module("ariadne").factory("Feedback",["$resource",function(a){return a("/api/feedback")}]),angular.module("ariadne").factory("Task",["$resource",function(a){return a("/api/tasks/:id",{id:"@id"})}]),angular.module("ariadne").factory("User",["$resource",function(a){return a("/api/users/:id",{id:"@id"})}]);
//# sourceMappingURL=script.min.js.map