angular.module("ariadne",["ngResource","angular.filter","ui.bootstrap"]),angular.module("ariadne").controller("AdminController",["$scope","User","Task","Feedback","$filter",function(a,b,c,d,e){var f=this;f.stats={},f.userList=b.query({id:"all"},function(){f.stats.totalUsers=f.userList.length}),f.taskList=c.query({},function(){f.stats.totalTasks=f.taskList.length,f.stats.archivedTasks=e("filter")(f.taskList,{flags:{isArchived:!0}}).length,f.stats.activeTasks=e("filter")(f.taskList,{flags:{isActive:!0,isArchived:!1,isComplete:!1}}).length,f.stats.completeTasks=e("filter")(f.taskList,{flags:{isArchived:!1,isComplete:!0}}).length,f.stats.currentTasks=f.stats.totalTasks-f.stats.archivedTasks}),f.feedbackList=d.query(),f.archive=function(){b.get({id:"archive"},function(){})},f.toggleUser=function(a){}}]),angular.module("ariadne").controller("FeedbackController",["Feedback","$scope",function(a,b){var c=this;c.createComment=function(){var d=new a;d.message=c.newMessage,d.name=b.main.user.username,d.$save(function(a){c.comments.push(a),c.newMessage=""})}}]),angular.module("ariadne").controller("MainController",["User","Task","$scope","$filter",function(a,b,c,d){var e=this;e.taskList=[],e.user=a.get(function(){b.query({_id:e.user._id},function(a){e.taskList=a})})}]),angular.module("ariadne").controller("TaskController",["$filter","Task","$scope",function(a,b,c){var d=this;d.taskLimit=9,d.activeCount=a("filter")(c.main.taskList,{flags:{isActive:!0}}).length,d.completeCount=a("filter")(c.main.taskList,{flags:{isComplete:!0}}).length,d.newTask={name:"",label:""},c.$watch(function(){return c.main.taskList},function(){d.activeCount=a("filter")(c.main.taskList,{flags:{isActive:!0}}).length,d.completeCount=a("filter")(c.main.taskList,{flags:{isComplete:!0}}).length}),d.createTask=function(){var a=new b;angular.merge(a,d.newTask),a.owner=c.main.user._id,a.$save({_id:c.main.user._id},function(a){c.main.taskList.push(a),d.newTask.name="",d.newTask.label=""})},d.removeTask=function(d){b.remove({_id:c.main.user._id,id:d},function(b){c.main.taskList=a("filter")(c.main.taskList,function(a){return a._id!==b._id})})},d.toggle=function(e,f){if("isActive"===f){if(!a("filter")(c.main.taskList,{_id:e})[0].flags.isActive&&a("filter")(c.main.taskList,{flags:{isActive:!0}}).length>=d.taskLimit)return void console.log("Active Task Limit Reached");a("filter")(c.main.taskList,{_id:e})[0].flags.isActive?a("filter")(c.main.taskList,{_id:e})[0].flags.isActive&&d.activeCount--:d.activeCount++}"isComplete"===f&&(a("filter")(c.main.taskList,{_id:e})[0].flags.isComplete?a("filter")(c.main.taskList,{_id:e})[0].flags.isComplete&&d.completeCount--:d.completeCount++);var g=a("filter")(c.main.taskList,{_id:e})[0];g.flags[f]=!g.flags[f],b.save({_id:c.main.user._id,id:e},g)}}]),angular.module("ariadne").controller("UserController",[function(){}]),angular.module("ariadne").factory("Feedback",["$resource",function(a){return a("/api/feedback")}]),angular.module("ariadne").factory("Task",["$resource",function(a){return a("/api/users/:_id/tasks/:id",{_id:"@_id",id:"@id"})}]),angular.module("ariadne").factory("User",["$resource",function(a){return a("/api/users/:id",{id:"@id"})}]);
//# sourceMappingURL=script.min.js.map